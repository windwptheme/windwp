/**
 * Theme Name: WindWP
 * Theme URI: https://windwp.com
 * Author: Ilia Volkov
 * Author URI: https://github.com/iliavolkov
 * Description: AI-First Tailwind Framework Theme for WordPress & WooCommerce.
 * Version: 1.0.0
 * Requires at least: 6.4
 * Tested up to: 6.5
 * Requires PHP: 8.0
 * License: GPL-2.0-or-later
 * License URI: https://www.gnu.org/licenses/gpl-2.0.html
 * Text Domain: windwp
 * Tags: full-site-editing, block-theme, tailwind, ai-first
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   BASE LAYER — WordPress FSE Resets
   ============================================ */
@layer base {
    :root :where(.is-layout-constrained) > * {
        margin-block-start: 0;
        margin-block-end: 0;
    }

    body {
        @apply bg-slate-950;
    }

    html {
        scroll-behavior: smooth;
    }

    /* Standard block resets */
    .wp-block-group { @apply m-0; }
    .wp-block-navigation a { @apply no-underline; }

    /* Accessibility */
    .screen-reader-text {
        @apply absolute w-[1px] h-[1px] p-0 -m-[1px] overflow-hidden whitespace-nowrap border-0;
        clip: rect(1px, 1px, 1px, 1px);
        clip-path: inset(50%);
    }

    .skip-link:focus {
        @apply fixed top-4 left-4 z-[100] bg-white text-slate-950 py-2 px-4 rounded-lg shadow-xl no-underline font-bold;
        width: auto;
        height: auto;
        clip: auto;
        clip-path: none;
    }
}

/* ============================================
   COMPONENTS LAYER — Design Tokens & Bridges
   ============================================ */
@layer components {
    
    /* --- TAILWIND COMPONENTS --- 
       Restoring buttons to the exact windwp-22 style for perfect rendering.
    */
    .btn-primary {
        @apply rounded-xl bg-gradient-to-r from-primary to-primary-dark 
               text-white px-10 py-5 text-sm font-black uppercase tracking-widest 
               hover:from-primary-dark hover:to-primary hover:scale-105 
               transition-all duration-300 active:scale-95 no-underline
               inline-flex items-center justify-center border-none;
    }

    .btn-secondary {
        @apply rounded-xl bg-gradient-to-r from-primary to-primary-dark 
               text-white px-6 py-3 text-xs font-black uppercase tracking-widest 
               hover:from-primary-dark hover:to-primary hover:scale-105 
               transition-all duration-300 active:scale-95 no-underline
               inline-flex items-center justify-center border-none;
    }

    .btn-outline {
        @apply rounded-xl bg-transparent border-2 border-primary text-primary 
               px-10 py-5 text-sm font-black uppercase tracking-widest 
               hover:bg-gradient-to-r hover:from-primary hover:to-primary-dark 
               hover:border-transparent hover:text-white hover:scale-105 
               transition-all duration-300 active:scale-95 no-underline
               inline-flex items-center justify-center;
        background-image: none;
    }
    
    /* --- BRIDGE: Buttons --- 
       We increase specificity to override WP defaults without !important.
    */
    .wp-block-button.is-btn-primary .wp-block-button__link { @apply btn-primary; }
    .wp-block-button.is-btn-primary-sm .wp-block-button__link { @apply btn-secondary; }
    .wp-block-button.is-btn-outline .wp-block-button__link { @apply btn-outline; }

    /* --- BRIDGE: Layout & Visibility --- */
    .is-desktop-only { 
        display: none; 
    }
    @media (min-width: 1024px) {
        .wp-block-group.is-desktop-only,
        .wp-block-buttons.is-desktop-only,
        .wp-block-navigation.is-desktop-only { display: flex; }
    }

    .is-mobile-only { 
        display: flex; 
    }
    @media (min-width: 1024px) {
        .wp-block-group.is-mobile-only,
        .wp-block-buttons.is-mobile-only,
        .wp-block-navigation.is-mobile-only { display: none; }
    }

    /* --- BRIDGE: Header Features --- */
    .is-sticky-header {
        @apply sticky top-0 z-50 border-b border-white/5 backdrop-blur-md;
    }

    .is-section-container {
        @apply mx-auto max-w-7xl px-6 lg:px-8;
    }

    /* --- BRIDGE: Visual Logo --- */
    .is-logo-icon {
        @apply w-10 h-10 flex items-center justify-center shrink-0 
               cursor-pointer transition-all duration-300 group-hover:scale-110;
    }
    
    .is-logo-text {
        @apply m-0 text-[20px] font-black leading-none;
    }

    .is-logo-image img {
        @apply rounded-xl transition-all duration-300 group-hover:scale-110;
    }

    /* --- BRIDGE: Mobile Menu & Burger --- */
    .burger-icon {
        @apply relative w-6 h-5 flex flex-col justify-between cursor-pointer items-center;
    }
    
    .burger-line {
        @apply block w-full h-0.5 bg-white rounded transition-all duration-300 origin-center;
    }

    .is-menu-open .burger-line:nth-child(1) { @apply rotate-45 translate-y-[9px]; }
    .is-menu-open .burger-line:nth-child(2) { @apply opacity-0 scale-0; }
    .is-menu-open .burger-line:nth-child(3) { @apply -rotate-45 -translate-y-[9px]; }

    .mobile-menu-panel {
        @apply absolute left-0 right-0 top-full bg-slate-950 border-b border-white/10 shadow-2xl z-50;
    }

    .mobile-menu-panel[hidden] {
        display: none;
    }

    /* --- NAVIGATION STYLING --- */
    .wp-block-navigation .wp-block-navigation-item__content,
    .wp-block-navigation .wp-block-navigation-item__label,
    .wp-block-navigation-link {
        @apply text-white font-bold uppercase tracking-widest transition-colors duration-300 hover:text-primary no-underline;
    }
    
    .is-desktop-nav .wp-block-navigation-item__content,
    .is-desktop-nav .wp-block-navigation-link {
        @apply text-[0.75rem] tracking-[0.1em];
    }

    .is-mobile-nav .wp-block-navigation-item__content,
    .is-mobile-nav .wp-block-navigation-link {
        @apply text-2xl;
    }

    /* Standard Gutenberg classes bridge */
    .wp-block-group.has-primary-gradient-background,
    .has-primary-gradient-background {
        background: linear-gradient(135deg, #00D1B2 0%, #009E87 100%);
    }

    /* --- TAILWIND COMPONENTS (Originals preserved) --- */
    .card-glass {
        @apply bg-white/5 backdrop-blur-sm rounded-3xl p-8 lg:p-10 
               border border-white/10 hover:border-primary/30 
               transition-all duration-500 relative overflow-hidden;
    }

    .icon-box {
        @apply w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center 
               group-hover:scale-110 group-hover:bg-primary/20 transition-all duration-300;
    }
}

/* ============================================
   HEADER STYLES — Bridged via ID from PHP
   ============================================ */
#windwp-header nav a {
    @apply text-[0.75rem] font-bold uppercase tracking-[0.1em] text-white 
           transition-colors duration-300 hover:text-primary;
}

/* ============================================
   EDITOR SPECIFIC STYLES
   ============================================ */
body .is-root-container .editor-styles-wrapper {
    background-color: var(--wp--preset--color--slate-950);
}

body .is-root-container .editor-styles-wrapper .wp-block-heading,
body .is-root-container .editor-styles-wrapper .wp-block-paragraph,
body .is-root-container .editor-styles-wrapper .wp-block-site-title a,
body .is-root-container .editor-styles-wrapper .wp-block-navigation .wp-block-navigation-item__content,
body .is-root-container .editor-styles-wrapper .wp-block-navigation .wp-block-navigation-item__label,
body .is-root-container .editor-styles-wrapper .wp-block-navigation-link {
    color: var(--wp--preset--color--white);
}

/* Force full-width header in the editor */
body .is-root-container .editor-styles-wrapper .wp-block-group.alignfull.is-sticky-header {
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    max-width: none;
}

/* Inner container alignment in editor */
body .is-root-container .editor-styles-wrapper .wp-block-group.is-section-container {
    width: 100%;
    max-width: 1280px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
}

/* Flex distribution in editor */
body .is-root-container .editor-styles-wrapper .wp-block-group.is-section-container > .block-editor-inner-blocks > .block-editor-block-list__layout,
body .is-root-container .editor-styles-wrapper .wp-block-group.is-section-container.is-layout-flex {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}

/* Remove Gutenberg default spacing */
body .is-root-container .editor-styles-wrapper .wp-block {
    margin-top: 0;
    margin-bottom: 0;
}
